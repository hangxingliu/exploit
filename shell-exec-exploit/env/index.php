<?php header("Content-type: text/html; charset=utf-8"); ?>
<html>
	<head>
		<title></title>
	</head>
	<body>
		<div align="center" style="margin-top: 100px">
			<h4 >what is your name?</h4>
			<div >
				<form name="ping" action="index.php" method="post">
					<input type="text" name="name" size="30">
					<input type="submit" value="submit" name="submit">
				</form>
			</div>
		<div>
	</body>
</html>

<?php
if( isset( $_POST[ 'submit' ] ) ) {
    $target = $_REQUEST[ 'name' ];
    $substitutions = array(
		'&'  => '_',
		'<'  => '_',
		'>'  => '_',
		'%0a'  => '_',
		'%09'  => '_',
		'%0d'  => '_',
		' '  => '_',
		'-'  => '_',
		'('  => '_',
		')'  => '_',
		'|'  => '_',
		'`'  => '_',
		'||' => '_',
		'echo'  => '_',
		'ls'  => '_',
		'cat'  => '_',
		'find'  => '_',
		'cd'  => '_',
		'pwd'  => '_',
		'mkdir'  => '_',
		'cp' => '_',
		'rm'  => '_',
		'mv'  => '_',
		'tac'  => '_',
		'more' => '_',
		'less' => '_',
		'head' => '_',
		'touch' => '_',
		'file' => '_',
		'which' => '_',
		'whereis' => '_',
		'locate' => '_',
		'dir' => '_',
		'*'  => '_',
		'+'  => '_',
		'='  => '_',
		'%'  => '_',
		'-'  => '_',
		'\\'  => '_',
		'\''  => '_',
		'`'  => '_',
		'k'  => '_' //avoiding kill ,kill and pkill ...
	);
 	$target = str_replace( array_keys( $substitutions ), $substitutions, $target );
 		if (stristr(php_uname('s'), 'Windows NT')) {
            $cmd = shell_exec( 'ping  ' . $target );
            echo '<pre>'.iconv('GB2312', 'UTF-8',$cmd).'</pre>';
        } else {
            $cmd = shell_exec( 'echo ' . $target );
            echo '<pre>'."your name is: ".iconv('GB2312', 'UTF-8',$cmd).'</pre>';
        }
}
?>